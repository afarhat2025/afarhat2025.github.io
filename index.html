<!DOCTYPE html><html><body>
<script>
(async ()=>{
  const p = new URLSearchParams(window.location.search);
  const pcn = p.get('pcn');
  const form = p.get('form');
  const asid = p.get('__asid');
  if (asid && form) {
    // Final hop: user is logged in + assigned â†’ go to form
    window.location.href = form + '?__asid=' + encodeURIComponent(asid);
  }
  else if (pcn && form) {
    // First hop: redirect to Plex login for the PCN we want
    const url = window.location.origin + window.location.pathname +
      '?form=' + encodeURIComponent(form);
    window.location.href =
      '/SignOn/Customer/' + encodeURIComponent(pcn) + 
      '?returnUrl=' + encodeURIComponent(url);
  }
  else {
    document.body.innerHTML = 
      'Usage: ?pcn=282515&form=' + encodeURIComponent('https://cloud.plex.com/Maintenance/Equipment/ViewEquipmentForm');
  }
})();
</script>
Redirecting...
</body></html>
